# DjangoBlog 用户使用手册

## 一、项目概述

DjangoBlog 是一款基于 Python 3.10 和 Django 4.0 构建的高性能博客平台。它不仅提供了传统博客的所有核心功能，还通过一个灵活的插件系统，让您可以轻松扩展和定制您的网站。

### 主要特性

- **强大的内容管理**: 支持文章、独立页面、分类和标签的完整管理。内置强大的 Markdown 编辑器，支持代码语法高亮。
- **全文搜索**: 集成搜索引擎，提供快速、精准的文章内容搜索。
- **互动评论系统**: 支持回复、邮件提醒等功能，评论内容同样支持 Markdown。
- **灵活的侧边栏**: 可自定义展示最新文章、最多阅读、标签云等模块。
- **社交化登录**: 内置 OAuth 支持，已集成 Google, GitHub, Facebook, 微博, QQ 等主流平台。
- **高性能缓存**: 原生支持 Redis 缓存，并提供自动刷新机制，确保网站高速响应。
- **SEO 友好**: 具备基础 SEO 功能，新内容发布后可自动通知 Google 和百度。
- **便捷的插件系统**: 通过创建独立的插件来扩展博客功能，代码解耦，易于维护。

## 二、快速开始

### 1. 环境准备

确保您的系统中已安装 Python 3.10+ 和 MySQL/MariaDB。

### 2. 克隆与安装

```bash
# 克隆项目到本地
git clone https://github.com/liangliangyy/DjangoBlog.git
cd DjangoBlog

# 安装依赖
pip install -r requirements.txt
```

### 3. 项目配置

- **数据库**:
  打开 `djangoblog/settings.py` 文件，找到 `DATABASES` 配置项，修改为您的 MySQL 连接信息。

  ```python
  DATABASES = {
      'default': {
          'ENGINE': 'django.db.backends.mysql',
          'NAME': 'djangoblog',
          'USER': 'root',
          'PASSWORD': 'your_password',
          'HOST': '127.0.0.1',
          'PORT': 3306,
      }
  }
  ```
  在 MySQL 中创建数据库:
  ```sql
  CREATE DATABASE `djangoblog` DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
  ```

### 4. 初始化数据库

```bash
python manage.py makemigrations
python manage.py migrate

# 创建一个超级管理员账户
python manage.py createsuperuser
```

### 5. 运行项目

```bash
# (可选) 生成一些测试数据
python manage.py create_testdata

# (可选) 收集和压缩静态文件
python manage.py collectstatic --noinput
python manage.py compress --force

# 启动开发服务器
python manage.py runserver
```

现在，在您的浏览器中访问 `http://127.0.0.1:8000/`，您应该能看到 DjangoBlog 的首页了！

## 三、核心功能使用

### 1. 文章管理

#### 创建文章

1. 登录后台管理系统 (`/admin`)
2. 点击左侧菜单中的 "Articles" -> "Add Article"
3. 填写文章标题、内容、分类和标签
4. 选择文章状态（草稿或发布）
5. 点击 "Save" 保存文章

#### 文章编辑

1. 登录后台管理系统
2. 点击左侧菜单中的 "Articles" -> "Articles"
3. 找到要编辑的文章，点击文章标题
4. 修改文章内容
5. 点击 "Save" 保存修改

#### 文章删除

1. 登录后台管理系统
2. 点击左侧菜单中的 "Articles" -> "Articles"
3. 找到要删除的文章，点击文章标题
4. 点击页面底部的 "Delete" 按钮
5. 确认删除操作

### 2. 分类管理

#### 创建分类

1. 登录后台管理系统
2. 点击左侧菜单中的 "Categories" -> "Add Category"
3. 填写分类名称
4. 选择父分类（可选）
5. 点击 "Save" 保存分类

#### 分类编辑

1. 登录后台管理系统
2. 点击左侧菜单中的 "Categories" -> "Categories"
3. 找到要编辑的分类，点击分类名称
4. 修改分类信息
5. 点击 "Save" 保存修改

#### 分类删除

1. 登录后台管理系统
2. 点击左侧菜单中的 "Categories" -> "Categories"
3. 找到要删除的分类，点击分类名称
4. 点击页面底部的 "Delete" 按钮
5. 确认删除操作

### 3. 标签管理

#### 创建标签

1. 登录后台管理系统
2. 点击左侧菜单中的 "Tags" -> "Add Tag"
3. 填写标签名称
4. 点击 "Save" 保存标签

#### 标签编辑

1. 登录后台管理系统
2. 点击左侧菜单中的 "Tags" -> "Tags"
3. 找到要编辑的标签，点击标签名称
4. 修改标签信息
5. 点击 "Save" 保存修改

#### 标签删除

1. 登录后台管理系统
2. 点击左侧菜单中的 "Tags" -> "Tags"
3. 找到要删除的标签，点击标签名称
4. 点击页面底部的 "Delete" 按钮
5. 确认删除操作

### 4. 评论管理

#### 查看评论

1. 登录后台管理系统
2. 点击左侧菜单中的 "Comments" -> "Comments"
3. 查看所有评论

#### 审核评论

1. 登录后台管理系统
2. 点击左侧菜单中的 "Comments" -> "Comments"
3. 找到要审核的评论，点击评论标题
4. 勾选 "Is enable" 选项
5. 点击 "Save" 保存修改

#### 删除评论

1. 登录后台管理系统
2. 点击左侧菜单中的 "Comments" -> "Comments"
3. 找到要删除的评论，点击评论标题
4. 点击页面底部的 "Delete" 按钮
5. 确认删除操作

## 四、插件系统

插件系统是 DjangoBlog 的核心特色之一。它允许您在不修改核心代码的情况下，通过编写独立的插件来为您的博客添加新功能。

### 现有插件

- **view_count**: 文章浏览计数
- **seo_optimizer**: SEO 优化
- **article_copyright**: 文章版权信息
- **article_recommendation**: 文章推荐
- **external_links**: 外部链接
- **image_lazy_loading**: 图片懒加载
- **reading_time**: 阅读时间统计

### 开发插件

1. 在 `plugins` 目录下创建一个新的文件夹
2. 创建 `plugin.py` 文件，继承 `BasePlugin` 类
3. 实现插件功能
4. 注册插件钩子

示例插件结构:

```python
from djangoblog.plugin_manage.base_plugin import BasePlugin

class MyPlugin(BasePlugin):
    PLUGIN_NAME = "My Plugin"
    PLUGIN_DESCRIPTION = "This is my first plugin"
    PLUGIN_VERSION = "1.0.0"
    PLUGIN_AUTHOR = "My Name"

    def init_plugin(self):
        # 插件初始化逻辑
        pass

    def register_hooks(self):
        # 注册插件钩子
        pass
```

## 五、部署

### 传统部署

请参考 [服务器部署教程](https://www.lylinux.net/article/2019/8/5/58.html)。

### Docker 部署

项目已全面支持 Docker。请参考 [Docker 部署文档](/docs/docker.md) 来快速启动。

### Kubernetes 部署

我们也提供了完整的 [Kubernetes 部署指南](/docs/k8s.md)，助您轻松上云。

## 六、常见问题

### 1. 如何修改网站标题？

在后台管理系统中，点击左侧菜单中的 "Blog Settings" -> "Blog Settings"，修改 "Site title" 选项。

### 2. 如何添加友情链接？

在后台管理系统中，点击左侧菜单中的 "Links" -> "Add Link"，填写链接信息。

### 3. 如何修改网站主题？

修改 `blog/static/blog/css/style.css` 文件，或者使用插件系统添加自定义样式。

### 4. 如何备份数据库？

使用以下命令备份数据库:

```bash
mysqldump -u root -p djangoblog > djangoblog.sql
```

### 5. 如何恢复数据库？

使用以下命令恢复数据库:

```bash
mysql -u root -p djangoblog < djangoblog.sql
```

## 七、技术支持

如果您在使用过程中遇到问题，可以通过以下方式获取帮助:

- **GitHub Issues**: [https://github.com/liangliangyy/DjangoBlog/issues](https://github.com/liangliangyy/DjangoBlog/issues)
- **官方文档**: [https://djangoblog.readthedocs.io/](https://djangoblog.readthedocs.io/)
- **社区论坛**: [https://www.lylinux.net/](https://www.lylinux.net/)

## 八、贡献指南

我们热烈欢迎任何形式的贡献！如果您有好的想法或发现了 Bug，请随时提交 Issue 或 Pull Request。

### 贡献流程

1. Fork 项目
2. 创建分支
3. 提交修改
4. 推送分支
5. 创建 Pull Request

## 九、许可证

本项目基于 [MIT License](LICENSE) 开源。